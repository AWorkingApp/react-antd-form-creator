import*as e from"react";import t,{useState as r,useEffect as n,useRef as a,useCallback as o}from"react";import{DragSource as l,useDrop as i,useDrag as c,DndProvider as s}from"react-dnd";import{HTML5Backend as u}from"react-dnd-html5-backend";import{Menu as m,Button as p,Upload as f,Modal as d,Form as y,Rate as b,Slider as g,Input as v,Radio as h,Checkbox as E,Select as x,InputNumber as k,Divider as _,Tag as O,Image as P,Descriptions as S,Space as w,Drawer as C,Tabs as T,Layout as I,Row as j,Col as R}from"antd";import N from"react-signature-canvas";import $ from"antd/node_modules/rc-picker/lib/generate/dayjs";import D from"antd/lib/date-picker/generatePicker";import"antd/lib/date-picker/style/index";import A from"dayjs";var L="card",F="box",M="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),q={};function V(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}q.uuid=function(e,t){var r,n,a=M,o=[];if(t=t||a.length,e)for(r=0;r<e;r++)o[r]=a[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||(n=0|16*Math.random(),o[r]=a[19==r?3&n|8:n]);return o.join("")},q.uuidFast=function(){for(var e,t=M,r=new Array(36),n=0,a=0;a<36;a++)8==a||13==a||18==a||23==a?r[a]="-":14==a?r[a]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,r[a]=t[19==a?3&e|8:e]);return r.join("")},q.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))};V(".toolbar-item-module_item__R1Ruk{border:1px dashed #ddd;cursor:pointer;display:flex;justify-content:flex-start;list-style:none;margin:5px;padding:10px}.toolbar-item-module_item__R1Ruk>div{margin-right:10px}");var U=l(L,{beginDrag:e=>({...e.data.fieldProps,id:q.uuid().toLowerCase(),type:e.data.key,field_name:"field_"+q.uuid().toLowerCase()})},(e=>({connectDragSource:e.dragSource()})))((e=>{const{connectDragSource:r,data:n,onClick:a}=e;return r?t.createElement("div",{ref:r,onClick:a},n.name):null}));const B=[{key:"Header",name:"Header Text",icon:"fas fa-heading",fieldProps:{content:"Header"}},{key:"Paragraph",name:"Paragraph",icon:"fas fa-paragraph",fieldProps:{content:"Your text"}},{key:"LineBreak",name:"Line Break",icon:"fas fa-arrows-alt-h",fieldProps:{content:"Divider",plain:!1,dashed:!1}},{key:"Image",name:"Image",icon:"far fa-image",fieldProps:{field_name:"image_",src:"",alt:"Update URL"}},{key:"Dropdown",name:"Dropdown",icon:"far fa-caret-square-down",fieldProps:{field_name:"dropdown_",label:"Select",options:[{label:"Option 1",value:"Option 1"},{label:"Option 2",value:"Option 2"},{label:"Option 3",value:"Option 3"}],rules:[{required:!1,message:"Select value from list"}]}},{key:"Tags",name:"Tags",icon:"fas fa-tags",fieldProps:{field_name:"tags_",label:"Tag",options:[{label:"Option 1",value:"Option 1"},{label:"Option 2",value:"Option 2"},{label:"Option 3",value:"Option 3"}],rules:[{required:!1,message:"Select atleast one tag"}]}},{key:"Checkboxes",name:"Checkboxes",icon:"far fa-check-square",fieldProps:{field_name:"checkboxes_",label:"Checkbox",options:[{label:"Option 1",value:"Option 1"},{label:"Option 2",value:"Option 2"},{label:"Option 3",value:"Option 3"}],rules:[{required:!1,message:"Select atleast one option"}]}},{key:"RadioButtons",name:"Multiple Choice",icon:"far fa-dot-circle",fieldProps:{field_name:"radiobuttons_",label:"Options",options:[{label:"Option 1",value:"Option 1"},{label:"Option 2",value:"Option 2"},{label:"Option 3",value:"Option 3"}],rules:[{required:!1,message:"Choose any one option"}]}},{key:"TextInput",name:"Text Input",icon:"fas fa-font",fieldProps:{field_name:"text_input_",label:"Label",rules:[{required:!1,message:"Please enter value"}]}},{key:"NumberInput",name:"Number Input",icon:"fas fa-plus",fieldProps:{field_name:"number_input_",label:"Label",rules:[{required:!1,message:"Please enter value"}]}},{key:"TextArea",name:"Multi-line Input",icon:"fas fa-text-height",fieldProps:{field_name:"text_area_",label:"Label",rules:[{required:!1,message:"Please enter value"}]}},{key:"Rating",name:"Rating",icon:"fas fa-star",fieldProps:{field_name:"rating_",label:"Rate",allowClear:!0,allowHalf:!1,count:5,rules:[{required:!1,message:"Please rate"}]}},{key:"DatePicker",name:"Date",icon:"far fa-calendar-alt",fieldProps:{field_name:"date_picker_",label:"Date",allowClear:!0,format:"MM/DD/YYYY",rules:[{required:!1,message:"Please select date"}]}},{key:"TimePicker",name:"Time",icon:"far fa-clock",fieldProps:{field_name:"time_picker_",label:"Time",format:"hh:mm a",allowClear:!0,hourStep:1,minuteStep:1,rules:[{required:!1,message:"Please select time"}]}},{key:"Signature",name:"Signature",icon:"fas fa-pen-square",fieldProps:{field_name:"signature_",label:"Signature",rules:[{required:!1,message:"Please sing form"}]}},{key:"Photo",name:"Photo",icon:"fa fa-camera",fieldProps:{field_name:"photo_",label:"Photo",multiple:!0,accept:"image/png, image/jpeg",rules:[{required:!1,message:"Upload atleast one photo"}]}},{key:"File",name:"File Attachment",icon:"fas fa-file",fieldProps:{field_name:"file_",label:"Attach File",static:!0,maxCount:5,multiple:!0,rules:[{required:!1,message:"Upload atleast one file"}]}},{key:"Range",name:"Range",icon:"fas fa-sliders-h",fieldProps:{field_name:"range_",label:"Label",step:1,min:1,max:5,minLabel:"Easy",maxLabel:"Difficult"}}];const z=({fields:e,fieldProps:a,...o})=>{const[l,i]=r([]);return n((()=>{i(function(e,t=[],r){let n=[];return e||(n=r),n=n.map((e=>{let r=t.find((t=>e.key===t.key));return r&&(e.fieldProps={...e.fieldProps,...r.fieldProps}),e})),n}(e,a,B))}),[e,a]),t.createElement(m,{theme:"light",mode:"inline",defaultSelectedKeys:["4"]},l.map((e=>t.createElement(m.Item,{key:e.key,icon:t.createElement("i",{className:e.icon}),style:{border:"1px solid #efefef"}},t.createElement(U,{data:e,key:e.key})))))},Y=t.createContext({elements:[],setElements:()=>{}});function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H.apply(this,arguments)}const W=({value:e,onChange:r})=>{const o=a({});n((()=>{e&&o&&(o.current.clear(),o.current.fromDataURL(e))}),[]);return t.createElement("div",{style:{width:"300px",height:"150px",border:"1px solid #aaa",borderRadius:"10px",position:"relative"}},t.createElement(N,{ref:o,onEnd:e=>{r?.(o.current.toDataURL("image/png"))},canvasProps:{width:300,height:150}}),t.createElement(p,{type:"text",onClick:()=>{o.current.clear(),r?.(null)},style:{position:"absolute",right:0,bottom:0}},t.createElement("i",{className:"fa fa-trash"})))},K=D($),J=e.forwardRef(((t,r)=>e.createElement(K,H({},t,{picker:"time",mode:void 0,ref:r}))));J.displayName="TimePicker";const G=({action:e,value:r,onChange:n,children:a,listType:o,onPreview:l,multiple:i=!0,...c})=>{const[s,u]=t.useState(!1),[m,p]=t.useState(""),[y,b]=t.useState("");return t.createElement(t.Fragment,null,t.createElement(f,H({action:e,onChange:({fileList:e})=>{let t=e.map((e=>({uid:e.uid,name:e.name,status:e.status,url:e.url?e.url:e.response?.url})));n?.(t)},listType:o,multiple:i,fileList:r||null,onPreview:l||("picture-card"===o?async e=>{e.url||e.preview||(e.preview=await function(e){return new Promise(((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>r(e)}))}(e.originFileObj)),u(!0),p(e.url||e.preview),b(e.name||e.url.substring(e.url.lastIndexOf("/")+1))}:null)},c),a||t.createElement("div",null,"Click or Drag ",t.createElement("br",null),"file")),t.createElement(d,{visible:s,title:y,footer:null,onCancel:e=>u(!1)},t.createElement("img",{alt:y,style:{width:"100%"},src:m})))},Q=({element:e})=>{const{dropEffect:r,type:n,id:a,label:o,field_name:l,rules:i,...c}=e,s=e=>t.createElement(y.Item,{label:o,key:l,name:l,rules:i},e);return(()=>{switch(n){case"Header":return t.createElement("h1",null,c.content);case"Paragraph":return t.createElement("p",null,c.content);case"LineBreak":{const{content:e,...r}=c;return t.createElement(_,r,e)}case"Image":return""===c.src&&(c.src="https://via.placeholder.com/728x90.png?text=Place+Your+Image+Here"),t.createElement("div",null,t.createElement("img",{src:c.src,alt:c.alt}));case"TextInput":return s(t.createElement(v,c));case"NumberInput":return s(t.createElement(k,c));case"Dropdown":return s(t.createElement(x,c));case"Tags":return s(t.createElement(x,H({mode:"tags"},c)));case"Checkboxes":return s(t.createElement(E.Group,c));case"RadioButtons":return s(t.createElement(h.Group,c));case"TextArea":return s(t.createElement(v.TextArea,c));case"DatePicker":return s(t.createElement(K,c));case"TimePicker":return s(t.createElement(J,c));case"Range":const e={[c.min]:c.minLabel,[c.max]:c.maxLabel};return s(t.createElement(g,H({},c,{marks:e})));case"Rating":return s(t.createElement(b,c));case"Signature":return s(t.createElement(W,c));case"File":return s(t.createElement(G,c,t.createElement(p,null,t.createElement("i",{className:"fas fa-upload"})," Upload")));case"Photo":return s(t.createElement(G,H({},c,{listType:"picture-card"}),t.createElement("div",null,t.createElement("div",{style:{marginTop:8}},t.createElement("i",{className:"far fa-images"})," Â Upload"))));default:return t.createElement("div",null,JSON.stringify(c))}})()},Z=({element:e,value:r,...n})=>{const{type:a,...o}=e;return(()=>{switch(a){case"Header":return t.createElement("h1",null,o.content);case"Paragraph":return t.createElement("p",null,o.content);case"LineBreak":{const{content:e,...r}=o;return t.createElement(_,r,e)}case"Image":return""===o.src&&(o.src="https://via.placeholder.com/728x90.png?text=Place+Your+Image+Here"),t.createElement("img",{src:o.src,alt:o.alt});case"TextInput":case"NumberInput":case"Dropdown":case"RadioButtons":return t.createElement("div",null,r);case"File":return t.createElement(t.Fragment,null,r?.map(((e,r)=>t.createElement("div",{key:r},t.createElement("a",{href:e.url,target:"_blank",rel:"noreferrer"},e.name)))));case"Photo":return t.createElement(P.PreviewGroup,null,r?.map(((e,r)=>t.createElement(P,{width:200,src:e.url,key:r,style:{padding:"5px"}}))));case"Checkboxes":return t.createElement("div",null,r?.join(", "));case"Tags":return t.createElement("div",null,r?.map(((e,r)=>t.createElement(O,{key:r},e))));case"Rating":return t.createElement(b,{disabled:!0,value:r});case"DatePicker":case"TimePicker":return console.log(r),t.createElement("div",null,r?A(r).format(o.format):null);case"TextArea":return t.createElement("pre",null,r);case"Signature":return t.createElement("img",{src:r,alt:"Signature"});case"Range":const e={[o.min]:o.minLabel,[o.max]:o.maxLabel},{minLabel:n,maxLabel:l,...i}=o;return t.createElement(g,H({value:r,marks:e,onChange:e=>{}},i));default:throw new Error(`Unknown element type: ${a}`)}})()},X=({elements:e,form:r,...n})=>t.createElement(t.Fragment,null,e.map((e=>t.createElement(Q,{key:e.id,element:e}))));var ee={exports:{}},te={exports:{}},re={},ne="function"==typeof Symbol&&Symbol.for,ae=ne?Symbol.for("react.element"):60103,oe=ne?Symbol.for("react.portal"):60106,le=ne?Symbol.for("react.fragment"):60107,ie=ne?Symbol.for("react.strict_mode"):60108,ce=ne?Symbol.for("react.profiler"):60114,se=ne?Symbol.for("react.provider"):60109,ue=ne?Symbol.for("react.context"):60110,me=ne?Symbol.for("react.async_mode"):60111,pe=ne?Symbol.for("react.concurrent_mode"):60111,fe=ne?Symbol.for("react.forward_ref"):60112,de=ne?Symbol.for("react.suspense"):60113,ye=ne?Symbol.for("react.suspense_list"):60120,be=ne?Symbol.for("react.memo"):60115,ge=ne?Symbol.for("react.lazy"):60116,ve=ne?Symbol.for("react.block"):60121,he=ne?Symbol.for("react.fundamental"):60117,Ee=ne?Symbol.for("react.responder"):60118,xe=ne?Symbol.for("react.scope"):60119;function ke(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case ae:switch(e=e.type){case me:case pe:case le:case ce:case ie:case de:return e;default:switch(e=e&&e.$$typeof){case ue:case fe:case ge:case be:case se:return e;default:return t}}case oe:return t}}}function _e(e){return ke(e)===pe}re.AsyncMode=me,re.ConcurrentMode=pe,re.ContextConsumer=ue,re.ContextProvider=se,re.Element=ae,re.ForwardRef=fe,re.Fragment=le,re.Lazy=ge,re.Memo=be,re.Portal=oe,re.Profiler=ce,re.StrictMode=ie,re.Suspense=de,re.isAsyncMode=function(e){return _e(e)||ke(e)===me},re.isConcurrentMode=_e,re.isContextConsumer=function(e){return ke(e)===ue},re.isContextProvider=function(e){return ke(e)===se},re.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===ae},re.isForwardRef=function(e){return ke(e)===fe},re.isFragment=function(e){return ke(e)===le},re.isLazy=function(e){return ke(e)===ge},re.isMemo=function(e){return ke(e)===be},re.isPortal=function(e){return ke(e)===oe},re.isProfiler=function(e){return ke(e)===ce},re.isStrictMode=function(e){return ke(e)===ie},re.isSuspense=function(e){return ke(e)===de},re.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===le||e===pe||e===ce||e===ie||e===de||e===ye||"object"==typeof e&&null!==e&&(e.$$typeof===ge||e.$$typeof===be||e.$$typeof===se||e.$$typeof===ue||e.$$typeof===fe||e.$$typeof===he||e.$$typeof===Ee||e.$$typeof===xe||e.$$typeof===ve)},re.typeOf=ke;var Oe={};
/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,s=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,d=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,v=e?Symbol.for("react.scope"):60119;function h(e){if("object"==typeof e&&null!==e){var p=e.$$typeof;switch(p){case t:var y=e.type;switch(y){case c:case s:case n:case o:case a:case m:return y;default:var b=y&&y.$$typeof;switch(b){case i:case u:case d:case f:case l:return b;default:return p}}case r:return p}}}var E=c,x=s,k=i,_=l,O=t,P=u,S=n,w=d,C=f,T=r,I=o,j=a,R=m,N=!1;function $(e){return h(e)===s}Oe.AsyncMode=E,Oe.ConcurrentMode=x,Oe.ContextConsumer=k,Oe.ContextProvider=_,Oe.Element=O,Oe.ForwardRef=P,Oe.Fragment=S,Oe.Lazy=w,Oe.Memo=C,Oe.Portal=T,Oe.Profiler=I,Oe.StrictMode=j,Oe.Suspense=R,Oe.isAsyncMode=function(e){return N||(N=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),$(e)||h(e)===c},Oe.isConcurrentMode=$,Oe.isContextConsumer=function(e){return h(e)===i},Oe.isContextProvider=function(e){return h(e)===l},Oe.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},Oe.isForwardRef=function(e){return h(e)===u},Oe.isFragment=function(e){return h(e)===n},Oe.isLazy=function(e){return h(e)===d},Oe.isMemo=function(e){return h(e)===f},Oe.isPortal=function(e){return h(e)===r},Oe.isProfiler=function(e){return h(e)===o},Oe.isStrictMode=function(e){return h(e)===a},Oe.isSuspense=function(e){return h(e)===m},Oe.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===s||e===o||e===a||e===m||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===f||e.$$typeof===l||e.$$typeof===i||e.$$typeof===u||e.$$typeof===b||e.$$typeof===g||e.$$typeof===v||e.$$typeof===y)},Oe.typeOf=h}(),"production"===process.env.NODE_ENV?te.exports=re:te.exports=Oe
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/;var Pe=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;function Ce(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var Te=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==n.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,a=Ce(e),o=1;o<arguments.length;o++){for(var l in r=Object(arguments[o]))Se.call(r,l)&&(a[l]=r[l]);if(Pe){n=Pe(r);for(var i=0;i<n.length;i++)we.call(r,n[i])&&(a[n[i]]=r[n[i]])}}return a},Ie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",je=function(){};if("production"!==process.env.NODE_ENV){var Re=Ie,Ne={},$e=Function.call.bind(Object.prototype.hasOwnProperty);je=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function De(e,t,r,n,a){if("production"!==process.env.NODE_ENV)for(var o in e)if($e(e,o)){var l;try{if("function"!=typeof e[o]){var i=Error((n||"React class")+": "+r+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[o]+"`.");throw i.name="Invariant Violation",i}l=e[o](t,o,n,r,null,Re)}catch(e){l=e}if(!l||l instanceof Error||je((n||"React class")+": type specification of "+r+" `"+o+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in Ne)){Ne[l.message]=!0;var c=a?a():"";je("Failed "+r+" type: "+l.message+(null!=c?c:""))}}}De.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(Ne={})};var Ae=De,Le=te.exports,Fe=Te,Me=Ie,qe=Ae,Ve=Function.call.bind(Object.prototype.hasOwnProperty),Ue=function(){};function Be(){return null}"production"!==process.env.NODE_ENV&&(Ue=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});function ze(){}function Ye(){}Ye.resetWarningCache=ze;if("production"!==process.env.NODE_ENV){var He=te.exports;ee.exports=function(e,t){var r="function"==typeof Symbol&&Symbol.iterator,n="<<anonymous>>",a={array:c("array"),bool:c("boolean"),func:c("function"),number:c("number"),object:c("object"),string:c("string"),symbol:c("symbol"),any:i(Be),arrayOf:function(e){return i((function(t,r,n,a,o){if("function"!=typeof e)return new l("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var i=t[r];if(!Array.isArray(i))return new l("Invalid "+a+" `"+o+"` of type `"+u(i)+"` supplied to `"+n+"`, expected an array.");for(var c=0;c<i.length;c++){var s=e(i,c,n,a,o+"["+c+"]",Me);if(s instanceof Error)return s}return null}))},element:i((function(t,r,n,a,o){var i=t[r];return e(i)?null:new l("Invalid "+a+" `"+o+"` of type `"+u(i)+"` supplied to `"+n+"`, expected a single ReactElement.")})),elementType:i((function(e,t,r,n,a){var o=e[t];return Le.isValidElementType(o)?null:new l("Invalid "+n+" `"+a+"` of type `"+u(o)+"` supplied to `"+r+"`, expected a single ReactElement type.")})),instanceOf:function(e){return i((function(t,r,a,o,i){if(!(t[r]instanceof e)){var c=e.name||n;return new l("Invalid "+o+" `"+i+"` of type `"+((s=t[r]).constructor&&s.constructor.name?s.constructor.name:n)+"` supplied to `"+a+"`, expected instance of `"+c+"`.")}var s;return null}))},node:i((function(e,t,r,n,a){return s(e[t])?null:new l("Invalid "+n+" `"+a+"` supplied to `"+r+"`, expected a ReactNode.")})),objectOf:function(e){return i((function(t,r,n,a,o){if("function"!=typeof e)return new l("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var i=t[r],c=u(i);if("object"!==c)return new l("Invalid "+a+" `"+o+"` of type `"+c+"` supplied to `"+n+"`, expected an object.");for(var s in i)if(Ve(i,s)){var m=e(i,s,n,a,o+"."+s,Me);if(m instanceof Error)return m}return null}))},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Ue(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),Be;function t(t,r,n,a,i){for(var c=t[r],s=0;s<e.length;s++)if(o(c,e[s]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===m(t)?String(t):t}));return new l("Invalid "+a+" `"+i+"` of value `"+String(c)+"` supplied to `"+n+"`, expected one of "+u+".")}return i(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Ue("Invalid argument supplied to oneOfType, expected an instance of array."),Be;for(var t=0;t<e.length;t++){var r=e[t];if("function"!=typeof r)return Ue("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+p(r)+" at index "+t+"."),Be}return i((function(t,r,n,a,o){for(var i=0;i<e.length;i++)if(null==(0,e[i])(t,r,n,a,o,Me))return null;return new l("Invalid "+a+" `"+o+"` supplied to `"+n+"`.")}))},shape:function(e){return i((function(t,r,n,a,o){var i=t[r],c=u(i);if("object"!==c)return new l("Invalid "+a+" `"+o+"` of type `"+c+"` supplied to `"+n+"`, expected `object`.");for(var s in e){var m=e[s];if(m){var p=m(i,s,n,a,o+"."+s,Me);if(p)return p}}return null}))},exact:function(e){return i((function(t,r,n,a,o){var i=t[r],c=u(i);if("object"!==c)return new l("Invalid "+a+" `"+o+"` of type `"+c+"` supplied to `"+n+"`, expected `object`.");var s=Fe({},t[r],e);for(var m in s){var p=e[m];if(!p)return new l("Invalid "+a+" `"+o+"` key `"+m+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(t[r],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=p(i,m,n,a,o+"."+m,Me);if(f)return f}return null}))}};function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function l(e){this.message=e,this.stack=""}function i(e){if("production"!==process.env.NODE_ENV)var r={},a=0;function o(o,i,c,s,u,m,p){if(s=s||n,m=m||c,p!==Me){if(t){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var d=s+":"+c;!r[d]&&a<3&&(Ue("You are manually calling a React.PropTypes validation function for the `"+m+"` prop on `"+s+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),r[d]=!0,a++)}}return null==i[c]?o?null===i[c]?new l("The "+u+" `"+m+"` is marked as required in `"+s+"`, but its value is `null`."):new l("The "+u+" `"+m+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(i,c,s,u,m)}var i=o.bind(null,!1);return i.isRequired=o.bind(null,!0),i}function c(e){return i((function(t,r,n,a,o,i){var c=t[r];return u(c)!==e?new l("Invalid "+a+" `"+o+"` of type `"+m(c)+"` supplied to `"+n+"`, expected `"+e+"`."):null}))}function s(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(s);if(null===t||e(t))return!0;var n=function(e){var t=e&&(r&&e[r]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!n)return!1;var a,o=n.call(t);if(n!==t.entries){for(;!(a=o.next()).done;)if(!s(a.value))return!1}else for(;!(a=o.next()).done;){var l=a.value;if(l&&!s(l[1]))return!1}return!0;default:return!1}}function u(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function m(e){if(null==e)return""+e;var t=u(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function p(e){var t=m(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return l.prototype=Error.prototype,a.checkPropTypes=qe,a.resetWarningCache=qe.resetWarningCache,a.PropTypes=a,a}(He.isElement,!0)}else ee.exports=function(){function e(e,t,r,n,a,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ye,resetWarningCache:ze};return r.PropTypes=r,r}();var We=ee.exports;const Ke=({elements:e,values:r,descriptionProps:n,descriptionItemProps:a,...o})=>e.reduce(((e,t,r)=>{if("Header"===t.type||"Paragraph"===t.type||"LineBreak"===t.type||"Image"===t.type)e.push(t);else{const r=e[e.length-1];Array.isArray(r)?(r.push(t),e[e.length-1]=r):e.push([t])}return e}),[]).map((e=>{if(Array.isArray(e))return t.createElement(S,n,e.map(((e,n)=>{const o=r?.[e.field_name];return t.createElement(S.Item,H({key:e.id,label:e.label},a),t.createElement(Z,{key:e.id,element:e,value:o}))})));{const n=r?.[e.field_name];return t.createElement(Z,{key:e.id,element:e,value:n})}}));Ke.defaultProps={descriptionProps:{bordered:!0,size:"small",column:{sm:1,xs:1}},descriptionItemProps:{labelStyle:{width:"20%"}}},Ke.propTypes={elements:We.array.isRequired,values:We.object.isRequired,descriptionProps:We.object,descriptionItemProps:We.object};var Je="drop-zone-module_dropzone__U0plI";V(".drop-zone-module_dropzone__U0plI{min-height:300px};");var Ge="sortable-elements-module_element__QKnFt",Qe="sortable-elements-module_sorter__1BEVs",Ze="sortable-elements-module_action__lyZFh",Xe="sortable-elements-module_formitem__hfy0k";V(".sortable-elements-module_element__QKnFt{border:1px solid transparent;display:flex;justify-content:flex-start;padding:.2rem;position:relative}.sortable-elements-module_element__QKnFt:hover{background-color:ivory;border:1px solid #0000002c}.sortable-elements-module_sorter__1BEVs{cursor:all-scroll;flex:0 0 40px;margin-right:20px}.sortable-elements-module_action__lyZFh{background-color:#0000002c;border-bottom-left-radius:4px;border-bottom-right-radius:4px;float:left;position:absolute;right:0;top:0}.sortable-elements-module_formitem__hfy0k{flex:1 1 auto}");const et=({element:e,index:n,onMove:o,onEdit:l,onDelete:s})=>{const u=a(null),[m,f]=r(!1),[{handlerId:d},y]=i({accept:F,collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){if(!u.current)return;const r=e.index,a=n;if(r===a)return;const l=u.current?.getBoundingClientRect(),i=(l.bottom-l.top)/2,c=t.getClientOffset().y-l.top;r<a&&c<i||r>a&&c>i||(o(r,a),e.index=a)}}),[{isDragging:b},g,v]=c({type:F,item:()=>({id:e.id,index:n}),collect:e=>({isDragging:e.isDragging()})}),h=b?.6:1;return g(y(u)),t.createElement("div",{ref:v,className:Ge,style:{opacity:h},"data-handler-id":d,onMouseOver:e=>f(!0),onMouseOut:e=>f(!1)},t.createElement("div",{className:Qe,ref:u},t.createElement("i",{className:"fas fa-grip-vertical",style:{margin:"10px",color:"#ccc"}})),t.createElement("div",{className:Xe},t.createElement(Q,{element:e})),t.createElement("div",{className:Ze,style:{display:m?"block":"none"}},t.createElement(p,{type:"link",onClick:t=>{l&&l(e,n)}},t.createElement("i",{className:"fas fa-edit"})),t.createElement(p,{type:"link",danger:!0,onClick:t=>{s&&s(e,n)}},t.createElement("i",{className:"fas fa-trash"}))))},tt=e=>t.createElement(y.List,{name:e.name},((e,{add:r,remove:n})=>t.createElement(y.Item,{label:"Options"},e.map((e=>t.createElement(w,{key:e.key,align:"baseline"},t.createElement(y.Item,H({},e,{name:[e.name,"label"]}),t.createElement(v,{placeholder:"Label"})),t.createElement(y.Item,H({},e,{name:[e.name,"value"]}),t.createElement(v,{placeholder:"Value"})),t.createElement("i",{className:"fa fa-minus-circle",onClick:()=>n(e.name)})))),t.createElement(y.Item,null,t.createElement(p,{type:"dashed",onClick:()=>r(),block:!0},"Add Option"))))),rt=e=>t.createElement(y.List,{name:e.name},(r=>t.createElement(y.Item,{label:"Validations"},r.map(((r,n)=>t.createElement(w,{key:r.key,align:"baseline"},Object.keys(e.value[n]).map((t=>at([r.name,t],e.value[n][t]))))))))),nt=e=>(Array.isArray(e)&&(e=e[e.length-1]),"string"==typeof e?e.replace(/([A-Z])/g,(e=>` ${e}`)).replace(/^./,(e=>e.toUpperCase())).trim():e),at=(e,t)=>{let r="TextArea",n=[];switch(typeof t){case"boolean":return r="RadioButtons",n=[{label:"Yes",value:!0},{label:"No",value:!1}],React.createElement(Q,{key:e,element:{field_name:e,options:n,label:nt(e),type:r}});case"string":return r="content"===e?"TextArea":"TextInput",React.createElement(Q,{element:{field_name:e,options:n,label:nt(e),type:r}});case"number":return r="NumberInput",React.createElement(Q,{key:e,element:{field_name:e,options:n,label:nt(e),type:r}});case"object":if("options"===e)return React.createElement(tt,{key:e,name:["options"]});if("rules"===e)return React.createElement(rt,{key:e,name:["rules"],value:t});break;default:return r="TextArea",React.createElement(Q,{key:e,element:{field_name:e,options:n,label:nt(e),type:r}})}},ot=({element:e,show:a,onClose:o,onSubmit:l})=>{const{type:i,id:c,dropEffect:s,field_name:u,...m}=e||{type:null,id:null,dropEffecct:null,field_name:null},[f]=y.useForm(),[d,b]=r(!1);n((()=>{f.setFieldsValue(m)}),[m,f]),n((()=>{d||o?.()}),[d,o]),n((()=>{a&&b(a)}),[a]);return t.createElement(C,{title:"Edit Properties",onClose:e=>b(!1),visible:d,footer:t.createElement(w,null,t.createElement(p,{type:"primary",onClick:e=>{f.submit()}},"Submit"),t.createElement(p,{style:{marginRight:8},onClick:e=>b(!1)},"Cancel"))},t.createElement(y,{form:f,onFinish:e=>{l?.(e),b(!1)},labelAlign:"left",colon:!0,requiredMark:!0,layout:"vertical",labelCol:{span:8}},Object.keys(m).map((e=>at(e,m[e])))))},lt=({elements:e,onUpdate:a})=>{const[l,c]=r(!1),[s,u]=r(null),[m,p]=r(null),[{canDrop:f,isOver:d,draggedItem:b},g]=i((()=>({accept:L,drop:(e,t)=>e,collect:e=>({isOver:e.isOver(),canDrop:e.canDrop(),draggedItem:e.getDropResult()})})));n((()=>{b&&e&&a&&b.id&&a([...e,b])}),[b,e,a]);const v=o(((t,r)=>{let n=[...e];[n[t],n[r]]=[n[r],n[t]],a(n)}),[e,a]),h=(e,t)=>{u(e),p(t),c(!0)},E=(t,r)=>{a?.(e.filter(((e,t)=>r!==t)))};let x="#fff";return(f&&d||f)&&(x="#eee"),t.createElement("div",{ref:g,className:Je,style:{backgroundColor:x}},t.createElement(y,{labelAlign:"right",colon:!0,requiredMark:!0,labelCol:{span:5}},e.map(((e,r)=>t.createElement(et,{key:e.id,index:r,element:e,onMove:v,onEdit:h,onDelete:E})))),t.createElement(ot,{show:l,element:s,onClose:e=>c(!1),onSubmit:t=>{const r={...s,...t};a?.(e.map(((e,t)=>m!==t?e:r)))}}))},{Sider:it,Content:ct}=I,{TabPane:st}=T,ut=({fields:e=[],onUpdate:a,fieldProps:o,...l})=>{const[i,c]=r([]),[m,f]=r(!1),[b,g]=r({});n((()=>{e&&e.length&&c(e)}),[e]);return t.createElement(s,{backend:u},t.createElement(Y.Provider,{value:{elements:i,setElements:c}},t.createElement(T,{defaultActiveKey:"1",centered:!0},t.createElement(st,{tab:"Editor",key:"1"},t.createElement(I,{style:{height:"100%",display:"flex",alignItems:"stretch",gap:"10px"}},t.createElement(it,{theme:"light",width:250,breakpoint:"md",collapsedWidth:0},t.createElement(z,{fieldProps:o})),t.createElement(ct,{style:{backgroundColor:"#fff"}},t.createElement(lt,{elements:i,onUpdate:e=>{c([...e]),a?.(e)}})))),t.createElement(st,{tab:"Preview",key:"2"},t.createElement(j,null,t.createElement(R,{span:2}),t.createElement(R,{span:20},t.createElement(y,{onFinish:e=>{g(e),f(!0)},labelAlign:"left",colon:!0,requiredMark:!0,labelCol:{span:3},onSubmit:!0},t.createElement(X,{elements:i}),t.createElement(p,{type:"primary",htmlType:"submit"},"Submit"))),t.createElement(R,{span:2})))),t.createElement(d,{title:"View",footer:null,width:"90%",visible:m,onCancel:e=>f(!1),style:{width:"100%",resize:"auto"}},t.createElement(Ke,{elements:i,values:b}))))};export{ut as FormBuilder,X as FormRenderer,Ke as FormViewer};
